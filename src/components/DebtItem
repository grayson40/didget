import React, { useState, useRef } from 'react'
import { Card, Row, Col, Button, Modal, Form } from 'react-bootstrap'
import { FaTrashAlt, FaPen } from 'react-icons/fa'

const d = new Date();

export default function DebtItem({ debt, onDelete, onUpdate }) {
    const [open, setOpen] = useState(false);
    const debtName = useRef();
    const debtVal = useRef();

    // Modal close
    const handleClose = () => {
        setOpen(false);
    };

    const handleUpdate = () => {
        const updatedDebt = {
            debtName: debtName.current.value === '' ? debt.debtName : debtName.current.value,
            debtVal: debtVal.current.value === '' ? debt.debtVal : parseInt(debtVal.current.value)
        }
        onUpdate(debt.id, updatedDebt);
        handleClose();
    }

    return (
        <>
            {/* popup update window */}
            <Modal show={open} onClose={handleClose} onHide={handleClose}>
                <Modal.Body>
                    <h2 className='text-center mb-4'>Update Debt</h2>
                    <Form>
                        <Form.Group id='name'>
                            <Form.Label>Name</Form.Label>
                            <Form.Control ref={debtName} placeholder={debt.debtName} />
                        </Form.Group>
                        <Form.Group id='debtVal'>
                            <Form.Label>Value</Form.Label>
                            <Form.Control ref={debtVal} placeholder={`$${debt.debtVal}`} />
                        </Form.Group>
                        <Button className='w-100 mt-3' onClick={handleUpdate}>
                            Update
                        </Button>
                    </Form>
                </Modal.Body>
            </Modal>

            <Card style={{ backgroundColor: backColor, borderColor: bordColor, width: '450px', textAlign: "Center", color: 'black' }} className="mb-2">
                <Card.Body>
                    <Row>
                        <Col sm={4} className="border-end">{debt.debtName}</Col>
                        <Col sm={4} className="border-end">${debt.debtVal}</Col>
                    </Row>
                </Card.Body>
            </Card>
        </>
    )
}
